!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.decodeMsgpack=e()}(this,function(){"use strict";function r(r){function e(r){for(var e={},t=0;r>t;t++){var n=a();e[n]=a()}return e}function t(e){var t=r.subarray(i,i+e);return i+=e,t}function n(e){var t=r.subarray(i,i+e);i+=e;var n=65535;if(e>n){for(var u=[],a=0;a<t.length;a+=n)u.push(String.fromCharCode.apply(null,t.subarray(a,a+n)));return u.join("")}return String.fromCharCode.apply(null,t)}function u(r){for(var e=new Array(r),t=0;r>t;t++)e[t]=a();return e}function a(){var a,o,s=r[i];if(0===(128&s))return i++,s;if(128===(240&s))return o=15&s,i++,e(o);if(144===(240&s))return o=15&s,i++,u(o);if(160===(224&s))return o=31&s,i++,n(o);if(224===(224&s))return a=c.getInt8(i),i++,a;switch(s){case 192:return i++,null;case 194:return i++,!1;case 195:return i++,!0;case 196:return o=c.getUint8(i+1),i+=2,t(o);case 197:return o=c.getUint16(i+1),i+=3,t(o);case 198:return o=c.getUint32(i+1),i+=5,t(o);case 202:return a=c.getFloat32(i+1),i+=5,a;case 203:return a=c.getFloat64(i+1),i+=9,a;case 204:return a=r[i+1],i+=2,a;case 205:return a=c.getUint16(i+1),i+=3,a;case 206:return a=c.getUint32(i+1),i+=5,a;case 208:return a=c.getInt8(i+1),i+=2,a;case 209:return a=c.getInt16(i+1),i+=3,a;case 210:return a=c.getInt32(i+1),i+=5,a;case 217:return o=c.getUint8(i+1),i+=2,n(o);case 218:return o=c.getUint16(i+1),i+=3,n(o);case 219:return o=c.getUint32(i+1),i+=5,n(o);case 220:return o=c.getUint16(i+1),i+=3,u(o);case 221:return o=c.getUint32(i+1),i+=5,u(o);case 222:return o=c.getUint16(i+1),i+=3,e(o);case 223:return o=c.getUint32(i+1),i+=5,e(o)}throw new Error("Unknown type 0x"+s.toString(16))}var i=0,c=new DataView(r.buffer);return a()}return r});