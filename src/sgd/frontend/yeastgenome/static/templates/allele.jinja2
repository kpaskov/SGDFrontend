{% extends "global_layout.jinja2" %}

{% block title %}{{ allele.display_name }}{% endblock %}

{% block head %}
<script>
    var allele = {{ allele_js|safe }};
</script>

{% endblock %}

{% block body %}

<div class="row">

<!-- Navbar
================================================== -->
    <!-- Includes navbar.html into template -->
    {% include "navbar.jinja2" %}

    <div class="small-12 medium-10 columns content-column">

        <script>
            add_navbar_title('Allele: <span class="gene_name">{{ allele.display_name }}</span>')
            add_navbar_element('Overview', 'overview');
	    {% if allele.phenotype|length > 0 %}
                add_navbar_element('Phenotype Annotations', 'phenotype');
            {% endif %}	    


	    {% if allele.references|length > 0 %}
                add_navbar_element('References', 'reference');
            {% endif %}

	    add_navbar_element('Resources', 'resource');
        
        </script>

<!-- Overview
================================================== -->
        <section id="overview" data-magellan-destination="overview">
            <div class="page-header">
                <h1>Allele: {{ allele.display_name }}
		     <a href="#" data-dropdown="summary_help"><i class="fa fa-info-circle"></i></a>
                     <p id="summary_help" class="f-dropdown content medium" data-dropdown-content>
		     	SOME TEXT HERE
                     </p>
		</h1>
                <hr />

        <div class="">
	    <dl class="key-value">
	       <dt>Allele Name</dt>
	       <dd>{{ allele.display_name }}</dd>
               <dt>SGDID</dt>
               <dd>{{ allele.sgdid }}</dd>
	       {% for alias in allele.aliases %}
	          {% if loop.first %}<dt>Aliases</dt><dd>{% endif %}
                     {{ alias }}
                  {% if not loop.last %};{% else %}</dd>{% endif %}
	       {% endfor %}
	       {% if allele.affected_gene %}
	          <dt>Affected Gene</dt>
	          <dd><a href='/locus/{{allele.affected_gene}}' target='_blank'>{{ allele.affected_gene }}</a></dd>
	       {% endif %}
	       <dt>Allele Type</dt>
               <dd>{{ allele.allele_type }}</dd>
	       {% if allele.description %}
	           <dt>Description</dt>
               	   <dd>{{ allele.description }}</dd>
	       {% endif %}
            </dl>
        </div>
        </section>


        <!-- Phenotype
        ================================================== -->
        {% if allele.phenotype|length > 0 %}
        <section id="phenotype" data-magellan-destination="phenotype">
            <div class="page-header">
                <h2>Phenotype Annotations
                    <a href="#" data-dropdown="phenotype_info"><i class="fa fa-info-circle"></i></a>
                    <p id="phenotype_info" class="f-dropdown content medium" data-dropdown-content>
                        Phenotype annotations for a gene are curated single mutant phenotypes that
                        require an observable (e.g., "cell shape"), a qualifier (e.g., "abnormal"),
                        a mutant type (e.g., null), strain background, and a reference. In addition,
                        annotations are classified as classical genetics or high-throughput (e.g.,
                        large scale survey, systematic mutation set). Whenever possible, allele
                        information and additional details are provided.
                    </p>
                    <span id="phenotype_table_header" class="round secondary label"></span>
                </h2>
                <hr />
                <!-- Includes phenotype_table into template -->
                {% set table_id = "phenotype_table" %}
                {% include "allele_phenotype_table.jinja2" %}
            </div>
        </section>
        {% endif %}



<!-- References
================================================== -->
    {% if allele.references|length > 0 %}
    <section id="reference" data-magellan-destination="reference">
            <div class="page-header">
                     <h2>References
                           <a href="#" data-dropdown="reference_help"><i class="fa fa-info-circle"></i></a>
                           <p id="reference_help" class="f-dropdown content medium" data-dropdown-content>
                                List of references used specifically to curate the information in Overview section.
                           </p>

                     </h2>
                     <hr />
             <ul class="unstyled">
                {% for ref in allele.references %}
                   <li>
                      <a href="{{ ref.link|e }}">{{ ref.display_name|e }}</a>
                                    <span>{{ ref.citation|e|replace(ref.display_name, '') }}</span>
                      {% if ref.pubmed_id != none %}
                                       <small>PMID: {{ ref.pubmed_id|e }}</small>
                                    {% endif %}
                      <ul class="ref-links">
                         <li><a href="{{ ref.link|e }}">SGD Paper</a></li>
                         {% for url in ref.urls %}
                            <li><a target="_infowin" href="{{ url.link|e }}">{{ url.display_name|e }}</a></li>
                         {% endfor %}
                      </ul>
                   </li>
                {% endfor %}
             </ul>
	</div>     
    </section>
    {% endif %}


<!-- Resources
================================================== -->
    <section id="resources">
        <h2>Resources</h2>
        <hr />
	<div class="panel">
            <h3>Mutant Strains</h3>
	        <p id="mutant_resources_list">
                    {% for url in allele.urls if url.category == 'LOCUS_PHENOTYPE_RESOURCES_MUTANT_STRAINS'%}
                        <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                    {% endfor %}
                </p>
            <h3>Phenotype Resources</h3>
	        <p id="phenotype_resources_list">
                    {% for url in allele.urls if url.category == 'LOCUS_PHENOTYPE_RESOURCES_PHENOTYPE_RESOURCES'%}
                        <a href="{{ url.link }}">{{ url.display_name }}</a>{% if not loop.last %} | {% endif %}
                    {% endfor %}
                </p>

            <h3>Ontology</h3>

	
        </div>
    </section>

{% endblock body %}

{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="{{asset_root}}/js/build/cytoscape.min.js"></script>
{# don't host arbor.js on CDN because it makes webworker files that don't work on the cloud :( #}
<script src="/static/js/build/arbor.js"></script>
<script src="{{asset_root}}/js/cytoscape.js"></script>
<script src="{{asset_root}}/js/evidence.js"></script>
<script src="{{asset_root}}/js/allele.js"></script>
{% endblock scripts %}

