{% extends "global_layout.jinja2" %}

{% block title %}{{ locus.display_name }} Disease Ontology{% endblock %}

{% block head %}
<script>
    var locus = {{ locus_js|safe }}
</script>
{% endblock %}


{% block body %}

<!-- Tabs
================================================== -->
<!-- Includes tabs.html into template -->
{% include "tabs.jinja2" %}
<script>document.getElementById("disease_tab").className += " active";</script>

<div class="row">

<!-- Navbar
================================================== -->
    <!-- Includes navbar.html into template -->
    {% include "navbar.jinja2" %}

    <div class="small-12 medium-10 columns content-column">

        <script>
            add_navbar_title('<span>{% if locus.display_name == locus.format_name %}{{ locus.display_name }}{% else %}{{ locus.display_name }} / {{ locus.format_name }}{% endif %}</span>');
            add_navbar_element("Disease Ontology Overview", "overview");
            add_navbar_element("Manually Curated", "manual");
            add_navbar_element("High-throughput", "htp");
            add_navbar_element("Computational", "comp");
            add_navbar_element("Shared Annotations", "network");
        </script>

<!-- Overview
================================================== -->
<section id="overview" data-magellan-destination="overview">
    <a target="_blank" href="https://sites.google.com/view/yeastgenome-help/function-help/gene-ontology-go" name="top" class="documentation-link">Disease Ontology Help <i class="fa fa-question-circle"></i></a>
    <h1>{% if locus.display_name == locus.format_name %}{{ locus.display_name }}{% else %}{{ locus.display_name }} / {{ locus.format_name }}{% endif %} Gene Ontology
        <a href="#" data-dropdown="summary_help"><i class="fa fa-info-circle"></i></a>

            <p id="summary_help" class="f-dropdown content medium" data-dropdown-content>
                DO Annotations consist of four mandatory components: a gene product, a term from
                the Disease Ontology (DO) controlled vocabulary, a reference, and an evidence code.
                SGD has manually curated and high-throughput DO Annotations, both derived from the
                literature, as well as computational, or predicted, annotations.
            </p>
    </h1>
    <hr />

    {% if locus['disease_overview']['paragraph'] %}
        <dl class="key-value">
            <dt>Summary</dt>
            <dd>{{ locus['disease_overview']['paragraph'] }}</dd>
        </dl>
    {% endif %}

    <!-- Includes go_overview.html into template -->
    {% include "disease_overview.jinja2" %}

    <ul class="button-group radius">
        <li><a id="disease_download_all" class="small button secondary"><i class="fa fa-download"></i> Download All Annotations (.txt)</a></li>
    </ul>
</section>

<!-- Manually Curated
================================================== -->
    <section id="manual" data-magellan-destination="manual">
        <h2>Manually Curated
            <a href="#" data-dropdown="drop_manual"><i class="fa fa-info-circle"></i></a>

            <p id="drop_manual" class="f-dropdown content medium" data-dropdown-content>
                <a target="_blank" href="https://sites.google.com/view/yeastgenome-help/sgd-general-help/glossary">Manually curated</a> DO annotations reflect our best
                understanding of the basic xxx for this gene product.
                Manually curated annotations are assigned by SGD curators based on published papers when
                available, or by curatorial statements if necessary. Curators periodically review all
                manually curated DO annotations for accuracy and completeness. The "Date Last Reviewed"
                indicates when these annotations were last reviewed.
            </p>
        </h2>
        <hr />
        <p><strong>Date Last Reviewed:</strong> {{locus.disease_overview.date_last_reviewed}}</p>

        <div class="spaced-container">
            <p style="display:none" id="manual_message">There are no manually curated annotations
            for {{ locus.display_name }}.</p>
            <div id="mc_disease_go">
                <!-- Includes disease_table into template -->
                {% set table_id = "mc_disease_table" %}
                {% include "disease_table.jinja2" %}
            </div>
        </div>
    </section>

<!-- Network Visualization
================================================== -->
    <section id="network" data-magellan-destination="network">
        <h2>Shared Annotations
            <a href="#" data-dropdown="network_info"><i class="fa fa-info-circle"></i></a>

            <p id="network_info" class="f-dropdown content medium" data-dropdown-content>
                This diagram displays manually curated and high-throughput DO terms (green squares) that are shared between the given gene (yellow circle) and other genes (gray
                circles) based on the number of DO terms shared (adjustable using the slider at the bottom).
            </p>
        </h2>
        <hr />
        <div class="">
            {% set network_id = "cy" %}
            {% include "disease_network.jinja2" %}
        </div>
    </section>

    </div>
</div>
{% endblock body %}

{% block scripts %}
<script src="{{asset_root}}/js/build/nouislider.min.js"></script>
{# don't host arbor.js on CDN because it makes webworker files that don't work on the cloud :( #}
<script src="/static/js/build/arbor.js"></script>
<script src="{{asset_root}}/js/build/cytoscape.min.js"></script>
<script src="{{asset_root}}/js/cytoscape.js"></script>
<script src="{{asset_root}}/js/evidence.js"></script>
<script src="{{asset_root}}/js/disease_details.js"></script>
{% endblock scripts %}
