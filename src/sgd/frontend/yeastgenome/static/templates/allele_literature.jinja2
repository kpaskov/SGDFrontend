{% extends "global_layout.jinja2" %}

{% block title %}{{ allele.name.display_name }}{% endblock %}

{% block head %}
<script>
    var allele = {{ allele_js|safe }};
</script>

{% endblock %}

{% block body %}

<!-- Tabs -->

<div class="row hide-for-small">
    <nav class="small-12 columns">
	<ul class="tabs sgd-tabs">
            <li id="summary_tab" class="tab-title"> <a href="/allele/{{ allele.sgdid }}"><span>Summary</span></a></li>
            <li id="literature_tab" class="tab-title"><a href="/allele/{{ allele.sgdid }}/literature"><span>Literature</span></a></li>
        </ul>
	<div class="sgd-tab-shadow"></div>
    </nav>
</div>

<script>document.getElementById("literature_tab").className += " active";</script>

<!-- Navbar
================================================== -->
<div class="row">

    <!-- Includes navbar.html into template -->
    {% include "navbar.jinja2" %}

    <div class="small-12 medium-10 columns content-column">

        <script>
            add_navbar_title({{ allele.name.display_name }}</span>')
            add_navbar_element('Literature Overview', 'overview');
            {% if allele.phenotype|length > 0 %}
                add_navbar_element('Phenotype Literature', 'phenotype');
            {% endif %}
            {% if allele.interaction|length > 0 %}
                add_navbar_element('Interaction Literature', 'interaction');
            {% endif %}
        </script>

        <!-- Overview -->
        <section id="overview" data-magellan-destination="overview">
            <h1>{{ allele.name.display_name }} Literature
                <a href="#" data-dropdown="summary_info"><i class="fa fa-info-circle"></i></a>
                <p id="summary_info" class="f-dropdown content medium" data-dropdown-content>
		    All manually curated literature for the specified allele. SGD gathers references via
		    a PubMed search for papers whose titles or abstracts contain “yeast” or “cerevisiae;”
		    these papers are reviewed manually and linked to relevant alleles by SGD curators.
                </p>
            </h1>
            <hr />
            <div class="">
                <dl class="key-value">
    		    <dt>Unique References</dt>
                    <dd>{{ allele.references|length }}</dd>
                    {% for alias in allele.aliases %}
                        {% if loop.first %}<dt>Aliases</dt><dd>{% endif %}
                        {{ alias.display_name }}
                        {% set references = alias.references %}
                        {% set full_url = True %}
                        {%- include "biblio_references.jinja2" -%}
                        {% if not loop.last %},{% else %}</dd>{% endif %}
                    {% endfor %}
                </dl>
            </div>
        </section>

	<!-- Phenotype
        ================================================== -->
        {% if allele.phenotype|length > 0 %}
        <section id="phenotype" data-magellan-destination="phenotype">
	<div class="page-header">
            <h2>Phenotype Literature
                 <a href="#" data-dropdown="phenotype_info"><i class="fa fa-info-circle"></i></a>
                 <p id="phenotype_info" class="f-dropdown content medium" data-dropdown-content>
                      Paper(s) associated with one or more pieces of phenotype evidence in SGD for the specified allele.
                 </p>
            </h2>
            <hr />

     	    <ul className="reference-list">
     	        {% for ref in allele.phenotype_references %}
                   <li>
		      <a href="{{ ref.link|e }}">{{ ref.display_name|e }}</a>
                          <span>{{ ref.citation|e|replace(ref.display_name, '') }}</span>
             	      {% if ref.pubmed_id != none %}
                          <small>PMID: {{ ref.pubmed_id|e }}</small>
             	      {% endif %}
             	      <ul class="ref-links">
                          <li><a href="{{ ref.link|e }}">SGD Paper</a></li>
                          {% for url in ref.urls %}
                             <li><a target="_infowin" href="{{ url.link|e }}">{{ url.display_name|e }}</a></li>
                          {% endfor %}
                      </ul>
                   </li>
                {% endfor %}
            </ul>
	</div>
        </section>
        {% endif %}

        <!-- Interaction
        ================================================== -->
        {% if allele.interaction|length > 0 %}
        <section id="interaction" data-magellan-destination="interaction">
        <div class="page-header">
            <h2>Phenotype Literature
                 <a href="#" data-dropdown="phenotype_info"><i class="fa fa-info-circle"></i></a>
                 <p id="phenotype_info" class="f-dropdown content medium" data-dropdown-content>
              	      Paper(s) associated with evidence supporting a genetic interaction between
		      the specified allele and another gene or allele in SGD.
                 </p>
            </h2>
            <hr />
	    <ul className="reference-list">
                {% for ref in allele.interaction_references %}
                   <li>
                      <a href="{{ ref.link|e }}">{{ ref.display_name|e }}</a>
                          <span>{{ ref.citation|e|replace(ref.display_name, '') }}</span>
                      {% if ref.pubmed_id != none %}
                          <small>PMID: {{ ref.pubmed_id|e }}</small>
                      {% endif %}
                      <ul class="ref-links">
                          <li><a href="{{ ref.link|e }}">SGD Paper</a></li>
                          {% for url in ref.urls %}
                              <li><a target="_infowin" href="{{ url.link|e }}">{{ url.display_name|e }}</a></li>
                          {% endfor %}
                      </ul>
                   </li>
                {% endfor %}
            </ul>
	</div>
	</section>
        {% endif %}

  </div>
</div>

{% endblock body %}

{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="{{asset_root}}/js/allele.js"></script>
{% endblock scripts %}

